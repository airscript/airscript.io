<!doctype html>
<html>
  <head></head>
  <meta charset='utf-8' />
  <title>Airscript.io</title>
  <link type="text/css" rel="stylesheet" media="screen" href="/stylesheets/bootstrap.css" />
  <link type="text/css" rel="stylesheet" media="screen" href="/stylesheets/bootstrap-responsive.css" />
  <link type="text/css" rel="stylesheet" media="screen" href="/stylesheets/normalize.css" />
  <link type="text/css" rel="stylesheet" media="screen" href="/stylesheets/all.css" />
  <script type="text/javascript" src="/javascripts/all.js"></script>
  <body>
    <div class='gist_modal modal hide fade' tabindex='-1'>
  <div class='modal-header'>
    <button class='close' data-dismiss='modal' type='button'></button>
    <h3>Select Gist</h3>
  </div>
  <div class='modal-body'>
    <p>Choose a gist to be the target for your Airscript engine.</p>
    <div class='gists' data-bind='foreach: scriptsPanel.gistsList()'>
      <a class='btn gist' data-bind='text: description, click: $parent.scriptsPanel.selectGist' data-dismiss='modal' href='#'></a>
    </div>
  </div>
</div>
<section class='content'>
  <div class='row-fluid'>
    <div class='scripts'>
      <h2 class='brand'>Airscript</h2>
      <label class='login-container'>
        <span class='login-info'>Logged in as</span>
        <span class='username' data-bind='text: userName()'></span>
        |
        <a class='logout-link' href='/auth/logout'>Logout</a>
      </label>
      <label data-bind='visible: scriptsPanel.hasGists'>
        <p class='gist-description' data-bind='text: scriptsPanel.activeGistDescription()' type='text'></p>
      </label>
      <ul class='files' data-bind='foreach: scriptsPanel.files()'>
        <li class='script' data-bind='css: activeClass, click: $parent.scriptsPanel.selectScript'>
          <span class='script_name' data-bind='text: name'></span>
        </li>
      </ul>
      <a class='new_file' data-bind='click: scriptsPanel.createNewFile' href='#'>Create New File</a>
      <div class='btn-group script_controls'>
        <div class='btn-toolbar'>
          <div class='btn' data-target='.gist_modal' data-toggle='modal'>Open Project</div>
        </div>
      </div>
    </div>
    <div class='edit main'>
      <div class='editor_container'>
        <div class='header'>
          <div class='file'>
            <a class='fullscreen btn' data-bind='click: toggleFullscreen'>
              <i class='icon-resize-full'></i>
            </a>
            <div class='dropdown'>
              <a class='btn link dropdown-toggle' data-bind='click: selectFullPath' data-toggle='dropdown' href='#'>
                <i class='icon-globe'></i>
              </a>
              <ul class='dropdown-menu' role='menu'>
                <li class='script_path' data-bind="attr: {'data-clipboard-text': fullScriptPath}">
                  <input class='full_script_path' data-bind='value: fullScriptPath' />
                </li>
              </ul>
            </div>
            <input class='edit_script' data-bind='visible: scriptEditing(), selected: true, value: scriptName(), event: { keypress: scriptsPanel.stopEditing }' />
            <h3 data-bind='text: scriptName(), visible: !scriptEditing()'></h3>
          </div>
          <div class='btn-group script_actions'>
            <button class='btn save_all' data-bind='click: scriptsPanel.updateGist, visible: scriptsPanel.hasScripts()' title='Save script'>
              <i class='icon-hdd'></i>
            </button>
            <button class='btn' data-bind='click: scriptsPanel.editScript, visible: scriptsPanel.hasScripts()' title='Edit script name'>
              <i class='icon-pencil'></i>
            </button>
            <button class='btn' data-bind='click: scriptsPanel.deleteScript, visible: scriptsPanel.hasScripts()' title='Delete script'>
              <i class='icon-trash'></i>
            </button>
          </div>
        </div>
        <div data-bind="ace: scriptSource(), aceOptions: { mode: 'lua', theme: 'github' }" id='editor'></div>
        <textarea class='hidden' data-bind='value: scriptSource()'></textarea>
      </div>
    </div>
  </div>
</section>
<script type='text/javascript'>
  //<![CDATA[
    (function() {

  Airscript.init();

}).call(this);

  //]]>
</script>
  </body>
</html>
